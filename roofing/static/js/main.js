!function(){function e(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}!function(e,t,s){s=s||window;var r=!1;s.addEventListener(e,function(){r||(r=!0,requestAnimationFrame(function(){s.dispatchEvent(new CustomEvent(t)),r=!1}))})}("resize","optimizedResize"),e(),window.addEventListener("resize",e);const t={navElem:document.querySelector(".nav"),scrolledClass:"scrolled",stickMenuToggle(){600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass),window.addEventListener("scroll",e=>{600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass)})},init(){this.stickMenuToggle()}};!function(){for(var e,t,s,r,n,a,o=document.getElementsByClassName("custom-select"),i=o.length,l=0;l<i;l++){for(t=(s=o[l].getElementsByTagName("select")[0]).length,(r=document.createElement("DIV")).setAttribute("class","select-selected"),r.innerHTML=s.options[s.selectedIndex].innerHTML,o[l].appendChild(r),(n=document.createElement("DIV")).setAttribute("class","select-items select-hide"),e=1;e<t;e++)(a=document.createElement("DIV")).innerHTML=s.options[e].innerHTML,a.addEventListener("click",function(e){for(var t,s,r,n=this.parentNode.parentNode.getElementsByTagName("select")[0],a=n.length,o=this.parentNode.previousSibling,i=0;i<a;i++)if(n.options[i].innerHTML==this.innerHTML){for(n.selectedIndex=i,o.innerHTML=this.innerHTML,r=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<r;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}o.click()}),n.appendChild(a);o[l].appendChild(n),r.addEventListener("click",function(e){e.stopPropagation(),c(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function c(e){for(var t=[],s=document.getElementsByClassName("select-items"),r=document.getElementsByClassName("select-selected"),n=s.length,a=r.length,o=0;o<a;o++)e==r[o]?t.push(o):r[o].classList.remove("select-arrow-active");for(o=0;o<n;o++)t.indexOf(o)&&s[o].classList.add("select-hide")}document.addEventListener("click",c);var d=document.getElementsByClassName("fancy-select");for(let e=0;e<d.length;e++){const m=d[e],h=m.querySelector("select"),p=m.querySelector(".select-selected"),v=p.innerText;function u(){v!==p.innerText&&m.classList.add("open")}h.addEventListener("selectState",s=>{if(h.classList.contains(s.detail.forElemWithClass)){const e=Array.from(h.options);e.forEach((e,t)=>{e.value===s.detail.state&&(p.innerHTML=e.innerText,h.selectedIndex=t,u())})}}),m.addEventListener("click",u)}}();google.maps.event.addDomListener(window,"load",function(){const n=document.querySelector(".input-state"),a=document.querySelector(".input-city");var e=document.querySelector(".input-address");let o=new google.maps.places.Autocomplete(e,{types:["address"],placeholder:" ",componentRestrictions:{country:["us"]}});google.maps.event.addListener(o,"place_changed",function(){let e=o.getPlace();var t=e.geometry.location.lat(),s=e.geometry.location.lng(),s=new google.maps.LatLng(t,s);let r=new google.maps.Geocoder;r.geocode({latLng:s},function(e,t){var s;t==google.maps.GeocoderStatus.OK&&e[0]&&(s=isNaN(e[0].address_components[e[0].address_components.length-2].long_name)?0:1,t=e[0].address_components[e[0].address_components.length-3-s]?.short_name,(s=e[0].address_components[e[0].address_components.length-5-s]?.long_name)&&(a.value=s),t&&n.dispatchEvent(new CustomEvent("selectState",{detail:{forElemWithClass:"input-state",state:t}})))})})});new Swiper(".gallery-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}}),new Swiper(".review-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}});!function(){for(let t of document.querySelectorAll('a[href*="#"]'))t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})})}(),t.init(),function(){const e=document.querySelectorAll("input.zip-modal-open");e.forEach(t=>{const s=t.closest("form.enter-zip-code-wrap"),r=s.querySelector(".error-msg");s.addEventListener("submit",e=>{e.preventDefault(),5===t.value.length?(function(e){const t=document.querySelector(".main-content"),s=document.querySelector(".quiz.modal"),r=document.querySelector("input.zip-input");r.value=e,t.classList.add("overflow"),s.classList.add("show")}(t.value),s.reset()):r.innerText="Enter valid zip-code: 6 numbers"}),t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,5})/);e.target.value=t[1],5===e.target.value.length&&(r.innerText="")})})}();new class{constructor(e){this.form=document.querySelector(e.form),this.steps=this.form.querySelectorAll(e.steps),this.progress=document.querySelector(e.progress),this.applyBtnSelector=e.nextBtn,this.reg={email:/^(([0-9A-Za-z]{1}[-0-9A-z\.]{1,}[0-9A-Za-z]{1})@([-A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/,name:/^([a-zA-Z]{1,}\s{0,}[a-zA-Z]{1,}'?-?[a-zA-Z]{1,}\s?([a-zA-Z]{1,})?)$/},this.step=0,this.stepsAmount=this.steps.length,this.init()}closeModalWindow(){const e=document.querySelector(".main-content"),t=document.querySelector(".quiz.modal"),s=document.querySelector(".are-you-shure"),r=document.querySelector(".to-home-page"),n=this.form.querySelectorAll(".error-msg"),a=this.form.querySelectorAll(this.applyBtnSelector),o=this.form.querySelectorAll(".yes-btn, .no-btn"),i=this.form.querySelectorAll(".data-info"),l=this.form.querySelectorAll(".fancy-input");e.classList.remove("overflow"),t.classList.remove("show"),s.classList.remove("show"),r.classList.remove("show"),this.form.reset(),this.toStep(0),a.forEach(e=>{e.classList.remove("hide"),"disable"===e.dataset.state&&e.setAttribute("disabled","disabled")}),o.forEach(e=>e.classList.add("hide")),i.forEach(e=>e.innerText=""),n.forEach(e=>e.innerText=""),l.forEach(e=>e.classList.remove("error"))}toggleConfirmExitWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".are-you-shure");t.classList.toggle("show"),e.classList.toggle("show")}openGoToHomeWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".to-home-page");t.classList.add("show"),e.classList.remove("show")}toStep(e){this.step=e,this.steps.forEach((e,t)=>{t<this.step?(e.classList.remove("active","next"),e.classList.add("prev")):t===this.step?(e.classList.remove("prev","next"),e.classList.add("active")):(e.classList.remove("prev","active"),e.classList.add("next"))}),this.updateHeroMsg(this.steps[this.step]),this.progressUpdate()}progressUpdate(){this.progress.style.width=100/this.stepsAmount*(this.step+1)+"%"}nextStep(){this.step++,this.toStep(this.step)}validate(e){const t=e.querySelectorAll("input, select");let s=!1;return t.forEach(e=>{("phone"===e.name&&this.validateTel(e)||"name"===e.name&&this.validateName(e)||("address"===e.name||"city"===e.name||"state"===e.name)&&this.validateAddress(e)||"email"===e.name&&this.validateEmail(e)||"SELECT"===e.nodeName&&this.validateSelect(e)||"leadid_tcpa_disclosure"===e.name&&this.validateTCPA(e))&&(s=!0)}),!s}validateTCPA(e){const t=e.closest(".add-info"),s=t.querySelector(".error-msg");let r=!1,n="";return e.checked||(r=!0,n="This is a required checkbox"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=n,e.addEventListener("change",e=>{t.classList.remove("error"),s.innerText=""}),r}validateSelect(e){const t=e.closest(".fancy-select"),s=e.closest(".custom-select"),r=t.querySelector(".error-msg");let n=!1,a="";return 0!==e.value&&"0"!==e.value||(n=!0,a="Please select one value"),n?t.classList.add("error"):t.classList.remove("error"),r.innerText=a,s.addEventListener("click",e=>{t.classList.remove("error"),r.innerText=""}),n}validateEmail(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");let r=!1,n="";return e.value?this.reg.email.test(e.value.trim())||(r=!0,n="Enter valid email please"):(r=!0,n="Enter your email please"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=n,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),r}validateAddress(e){const t=e.closest(".fancy-input")||e.closest(".fancy-select"),s=t.querySelector(".error-msg");let r=!1,n="";return e.value||(r=!0,n="This is a required field"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=n,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),r}validateName(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg"),r=e.value.trim();let n=!1,a="";return r?r.trim().includes(" ")?this.reg.name.test(r.trim())||(n=!0,a="Enter valid full name, only latter and space"):(n=!0,a="Enter valid full name: first name and last name"):(n=!0,a="Enter your full name please"),n?t.classList.add("error"):t.classList.remove("error"),s.innerText=a,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),n}validateTel(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");var r=e.value.trim();let n=!1,a="";return r?r.length<14&&(n=!0,a="Enter valid phone number please"):(n=!0,a="Enter your phone number please"),n?t.classList.add("error"):t.classList.remove("error"),s.innerText=a,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),n}updateConfirmPhone(e){if(this.form.querySelector(".phone-confirm")){const t=this.form.querySelector(".phone-confirm");t.innerText=e}}getTaskId(){const e=document.querySelector("input.task_id");var t=document.querySelector('input[name="service_type"]:checked').value,s=document.querySelector('input[name="roof_material"]:checked').value,r={Replace:{"Asphalt Shingle":325,"Cedar Shake":329,"Natural Slate":327,"Tar Torch Down":335,Aluminum:331,Tile:333},Install:{"Asphalt Shingle":313,"Cedar Shake":317,"Natural Slate":315,"Tar Torch Down":323,Aluminum:319,Tile:321},Repair:{"Asphalt Shingle":301,"Cedar Shake":305,"Natural Slate":303,"Tar Torch Down":311,Aluminum:307,Tile:309},"Shingle over existing roof":{"Asphalt Shingle":301}};t&&s&&"Shingle over existing roof"===t&&!r[t][s]?e.value=r[t]["Asphalt Shingle"]:t&&s&&r[t]&&r[t][s]&&(e.value=r[t][s])}updateHeroMsg(e){const t=document.querySelector("#hero-msg");e.dataset.info?t.innerText=e.dataset.info:t.innerText=""}submitForm(e){const t=document.querySelector(".submit-preloader");t.classList.add("active"),this.getTaskId();const s=e.querySelectorAll("input, select, button"),r=new FormData(e),n={stream_key:localStorage.getItem("stream_key"),order:{}};for(var a of r.entries()){var o=a[0];const i=a[1],l=["name","phone","email","zip","country","state","city","address"];"phone"===o?n[o]=i.replace(/\D+/g,""):"email"===o?n[o]=i.toLowerCase():l.includes(o)?n[o]=i:n.order[o]=i}fetch("https://hm.afflifter.com/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>{location.href="./success.html"+location.search,this.enableFormInputs(s),t.classList.remove("active"),this.closeModalWindow()})}enableFormInputs(e){e.forEach(e=>{e.removeAttribute("disabled")})}disableFormInputs(e){e.forEach(e=>{e.setAttribute("disabled",!0)})}init(){const e=this.form.querySelector(".change-phone"),t=document.querySelector(".close-modal-btn"),s=document.querySelector(".are-you-shure .exit"),r=document.querySelector(".to-home-page .exit"),n=document.querySelector(".are-you-shure .continue");function o(e){"Enter"!==e.key&&"Tab"!==e.key||e.preventDefault()}this.progressUpdate(),this.steps[this.step].classList.remove("prev","next"),this.steps[this.step].classList.add("active"),this.updateHeroMsg(this.steps[this.step]),this.steps.forEach(t=>{const s=t.querySelector(this.applyBtnSelector),r=t.querySelector(".yes-btn"),n=t.querySelector(".no-btn"),e=t.querySelectorAll("input"),a=t.querySelector(".data-info");e.forEach(t=>{"radio"===t.type?t.addEventListener("change",e=>{t.checked?s.removeAttribute("disabled"):s.setAttribute("disabled"),t.dataset.info?(a.innerText=t.dataset.info,r.classList.remove("hide"),n.classList.remove("hide"),s.classList.add("hide")):(a.innerText="",r.classList.add("hide"),n.classList.add("hide"),s.classList.remove("hide"))}):"phone"===t.name&&t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value="("+t[1]+") "+t[2]+"-"+t[3],this.updateConfirmPhone(e.target.value)}),t.addEventListener("keydown",o)});try{n.addEventListener("click",e=>{e.preventDefault(),this.openGoToHomeWindow()}),n.addEventListener("keydown",o)}catch(e){}try{r.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),r.addEventListener("keydown",o)}catch(e){}try{s.classList.contains("submit")||(s.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),s.addEventListener("keydown",o))}catch(e){}}),e.addEventListener("click",e=>{e.preventDefault(),this.toStep(this.step-1)}),t.addEventListener("click",e=>{this.toggleConfirmExitWindow()}),s.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),r.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),n.addEventListener("click",e=>{e.preventDefault(),this.toggleConfirmExitWindow()}),this.form.addEventListener("submit",e=>{e.preventDefault(),this.submitForm(this.form)})}}({form:"#step-form",steps:".step",progress:"#form-progress",nextBtn:".aplay-btn"})}();