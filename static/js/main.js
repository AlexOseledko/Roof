!function(){function e(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}!function(e,t,s){s=s||window;var r=!1;s.addEventListener(e,function(){r||(r=!0,requestAnimationFrame(function(){s.dispatchEvent(new CustomEvent(t)),r=!1}))})}("resize","optimizedResize"),e(),window.addEventListener("resize",e);const t={navElem:document.querySelector(".nav"),scrolledClass:"scrolled",stickMenuToggle(){600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass),window.addEventListener("scroll",e=>{600<=scrollY?this.navElem.classList.add(this.scrolledClass):this.navElem.classList.remove(this.scrolledClass)})},init(){this.stickMenuToggle()}};new Swiper(".gallery-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}}),new Swiper(".review-slider",{navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{200:{slidesPerView:1,spaceBetween:8},640:{slidesPerView:2,spaceBetween:16},992:{slidesPerView:3,spaceBetween:16}}});!function(){for(let t of document.querySelectorAll('a[href*="#"]'))t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href").substr(1);document.getElementById(e).scrollIntoView({behavior:"smooth",block:"start"})})}(),t.init(),function(){const e=document.querySelectorAll("input.zip-modal-open");e.forEach(t=>{const s=t.closest("form.enter-zip-code-wrap"),r=s.querySelector(".error-msg");s.addEventListener("submit",e=>{e.preventDefault(),5===t.value.length?(function(e){const t=document.querySelector(".main-content"),s=document.querySelector(".quiz.modal"),r=document.querySelector("input.zip-input");r.value=e,t.classList.add("overflow"),s.classList.add("show")}(t.value),s.reset()):r.innerText="Enter valid zip-code: 6 numbers"}),t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,5})/);e.target.value=t[1],5===e.target.value.length&&(r.innerText="")})})}();new class{constructor(e){this.form=document.querySelector(e.form),this.steps=this.form.querySelectorAll(e.steps),this.progress=document.querySelector(e.progress),this.applyBtnSelector=e.nextBtn,this.reg={email:/^(([0-9A-Za-z]{1}[-0-9A-z\.]{1,}[0-9A-Za-z]{1})@([-A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/,name:/^([a-zA-Z]{1,}\s{0,}[a-zA-Z]{1,}'?-?[a-zA-Z]{1,}\s?([a-zA-Z]{1,})?)$/},this.step=0,this.stepsAmount=this.steps.length,this.init()}closeModalWindow(){const e=document.querySelector(".main-content"),t=document.querySelector(".quiz.modal"),s=document.querySelector(".are-you-shure"),r=document.querySelector(".to-home-page"),n=this.form.querySelectorAll(".error-msg"),i=this.form.querySelectorAll(this.applyBtnSelector),a=this.form.querySelectorAll(".yes-btn, .no-btn"),o=this.form.querySelectorAll(".data-info"),l=this.form.querySelectorAll(".fancy-input");e.classList.remove("overflow"),t.classList.remove("show"),s.classList.remove("show"),r.classList.remove("show"),this.form.reset(),this.toStep(0),i.forEach(e=>{e.classList.remove("hide"),"disable"===e.dataset.state&&e.setAttribute("disabled","disabled")}),a.forEach(e=>e.classList.add("hide")),o.forEach(e=>e.innerText=""),n.forEach(e=>e.innerText=""),l.forEach(e=>e.classList.remove("error"))}toggleConfirmExitWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".are-you-shure");t.classList.toggle("show"),e.classList.toggle("show")}openGoToHomeWindow(){const e=document.querySelector(".quiz.modal"),t=document.querySelector(".to-home-page");t.classList.add("show"),e.classList.remove("show")}toStep(e){this.step=e,this.steps.forEach((e,t)=>{t<this.step?(e.classList.remove("active","next"),e.classList.add("prev")):t===this.step?(e.classList.remove("prev","next"),e.classList.add("active")):(e.classList.remove("prev","active"),e.classList.add("next"))}),this.updateHeroMsg(this.steps[this.step]),this.progressUpdate()}progressUpdate(){this.progress.style.width=100/this.stepsAmount*(this.step+1)+"%"}nextStep(){this.step++,this.toStep(this.step)}validate(e){const t=e.querySelectorAll("input, select");let s=!1;return t.forEach(e=>{("phone"===e.name&&this.validateTel(e)||"name"===e.name&&this.validateName(e)||"address"===e.name&&this.validateAddress(e)||"email"===e.name&&this.validateEmail(e)||"SELECT"===e.nodeName&&this.validateSelect(e))&&(s=!0)}),!s}validateSelect(e){const t=e.closest(".fancy-select"),s=e.closest(".custom-select"),r=t.querySelector(".error-msg");let n=!1,i="";return 0!==e.value&&"0"!==e.value||(n=!0,i="Please select one value"),n?t.classList.add("error"):t.classList.remove("error"),r.innerText=i,s.addEventListener("click",e=>{t.classList.remove("error"),r.innerText=""}),n}validateEmail(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");let r=!1,n="";return e.value?this.reg.email.test(e.value.trim())||(r=!0,n="Enter valid email please"):(r=!0,n="Enter your email please"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=n,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),r}validateAddress(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");let r=!1,n="";return e.value||(r=!0,n="Enter a valid address please"),r?t.classList.add("error"):t.classList.remove("error"),s.innerText=n,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),r}validateName(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg"),r=e.value.trim();let n=!1,i="";return r?r.trim().includes(" ")?this.reg.name.test(r.trim())||(n=!0,i="Enter valid full name, only latter and space"):(n=!0,i="Enter valid full name: first name and last name"):(n=!0,i="Enter your full name please"),n?t.classList.add("error"):t.classList.remove("error"),s.innerText=i,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),n}validateTel(e){const t=e.closest(".fancy-input"),s=t.querySelector(".error-msg");var r=e.value.trim();let n=!1,i="";return r?r.length<14&&(n=!0,i="Enter valid phone number please"):(n=!0,i="Enter your phone number please"),n?t.classList.add("error"):t.classList.remove("error"),s.innerText=i,e.addEventListener("input",e=>{t.classList.remove("error"),s.innerText=""}),n}updateConfirmPhone(e){if(this.form.querySelector(".phone-confirm")){const t=this.form.querySelector(".phone-confirm");t.innerText=e}}getTaskId(){const e=document.querySelector("input.task_id");var t=document.querySelector('input[name="service_type"]:checked').value,s=document.querySelector('input[name="roof_material"]:checked').value,r={Replace:{"Asphalt Shingle":325,"Cedar Shake":329,"Natural Slate":327,"Tar Torch Down":335,Aluminum:331,Tile:333},Install:{"Asphalt Shingle":313,"Cedar Shake":317,"Natural Slate":315,"Tar Torch Down":323,Aluminum:319,Tile:321},Repair:{"Asphalt Shingle":301,"Cedar Shake":305,"Natural Slate":303,"Tar Torch Down":311,Aluminum:307,Tile:309},"Shingle over existing roof":{"Asphalt Shingle":301}};console.log(t+", "+s),t&&s&&"Shingle over existing roof"===t&&!r[t][s]?e.value=r[t]["Asphalt Shingle"]:t&&s&&r[t]&&r[t][s]&&(e.value=r[t][s])}updateHeroMsg(e){const t=document.querySelector("#hero-msg");e.dataset.info?t.innerText=e.dataset.info:t.innerText=""}submitForm(e){const t=document.querySelector(".submit-preloader");t.classList.add("active"),this.getTaskId();const s=e.querySelectorAll("input, select, button"),r=new FormData(e),n={stream_key:localStorage.getItem("stream_key"),order:{}};for(var i of r.entries()){var a=i[0];const o=i[1];"phone"===a?n[a]=o.replace(/\D+/g,""):"email"===a?n[a]=o.toLowerCase():"name"===a||"zip"===a||"address"===a?n[a]=o:n.order[a]=o}fetch("https://hm.afflifter.com/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>{location.href="./success.html"+location.search,this.enableFormInputs(s),t.classList.remove("active"),this.closeModalWindow()})}enableFormInputs(e){e.forEach(e=>{e.removeAttribute("disabled")})}disableFormInputs(e){e.forEach(e=>{e.setAttribute("disabled",!0)})}init(){const e=this.form.querySelector(".change-phone"),t=document.querySelector(".close-modal-btn"),s=document.querySelector(".are-you-shure .exit"),r=document.querySelector(".to-home-page .exit"),n=document.querySelector(".are-you-shure .continue");function a(e){"Enter"!==e.key&&"Tab"!==e.key||e.preventDefault()}this.progressUpdate(),this.steps[this.step].classList.remove("prev","next"),this.steps[this.step].classList.add("active"),this.updateHeroMsg(this.steps[this.step]),this.steps.forEach(t=>{const s=t.querySelector(this.applyBtnSelector),r=t.querySelector(".yes-btn"),n=t.querySelector(".no-btn"),e=t.querySelectorAll("input"),i=t.querySelector(".data-info");e.forEach(t=>{"radio"===t.type?t.addEventListener("change",e=>{t.checked?s.removeAttribute("disabled"):s.setAttribute("disabled"),t.dataset.info?(i.innerText=t.dataset.info,r.classList.remove("hide"),n.classList.remove("hide"),s.classList.add("hide")):(i.innerText="",r.classList.add("hide"),n.classList.add("hide"),s.classList.remove("hide"))}):"phone"===t.name&&t.addEventListener("input",e=>{var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value="("+t[1]+") "+t[2]+"-"+t[3],this.updateConfirmPhone(e.target.value)}),t.addEventListener("keydown",a)});try{n.addEventListener("click",e=>{e.preventDefault(),this.openGoToHomeWindow()}),n.addEventListener("keydown",a)}catch(e){}try{r.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),r.addEventListener("keydown",a)}catch(e){}try{s.classList.contains("submit")||(s.addEventListener("click",e=>{e.preventDefault(),this.validate(t)&&this.nextStep()}),s.addEventListener("keydown",a))}catch(e){}}),e.addEventListener("click",e=>{e.preventDefault(),this.toStep(this.step-1)}),t.addEventListener("click",e=>{this.toggleConfirmExitWindow()}),s.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),r.addEventListener("click",e=>{e.preventDefault(),this.closeModalWindow()}),n.addEventListener("click",e=>{e.preventDefault(),this.toggleConfirmExitWindow()}),this.form.addEventListener("submit",e=>{e.preventDefault(),this.submitForm(this.form)})}}({form:"#step-form",steps:".step",progress:"#form-progress",nextBtn:".aplay-btn"});!function(){for(var e,t,s,r,n,i,a=document.getElementsByClassName("custom-select"),o=a.length,l=0;l<o;l++){for(t=(s=a[l].getElementsByTagName("select")[0]).length,(r=document.createElement("DIV")).setAttribute("class","select-selected"),r.innerHTML=s.options[s.selectedIndex].innerHTML,a[l].appendChild(r),(n=document.createElement("DIV")).setAttribute("class","select-items select-hide"),e=1;e<t;e++)(i=document.createElement("DIV")).innerHTML=s.options[e].innerHTML,i.addEventListener("click",function(e){for(var t,s,r,n=this.parentNode.parentNode.getElementsByTagName("select")[0],i=n.length,a=this.parentNode.previousSibling,o=0;o<i;o++)if(n.options[o].innerHTML==this.innerHTML){for(n.selectedIndex=o,a.innerHTML=this.innerHTML,r=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<r;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}a.click()}),n.appendChild(i);a[l].appendChild(n),r.addEventListener("click",function(e){e.stopPropagation(),c(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}function c(e){for(var t=[],s=document.getElementsByClassName("select-items"),r=document.getElementsByClassName("select-selected"),n=s.length,i=r.length,a=0;a<i;a++)e==r[a]?t.push(a):r[a].classList.remove("select-arrow-active");for(a=0;a<n;a++)t.indexOf(a)&&s[a].classList.add("select-hide")}document.addEventListener("click",c);var d=document.getElementsByClassName("fancy-select");for(let e=0;e<d.length;e++){const u=d[e],m=u.querySelector(".custom-select .select-selected"),h=m.innerText;u.addEventListener("click",e=>{h!==m.innerText&&u.classList.add("open")})}}(),google.maps.event.addDomListener(window,"load",function(){var e=document.getElementsByClassName("input-street")[0];new google.maps.places.Autocomplete(e,{types:["address"],placeholder:" ",componentRestrictions:{country:["us"]}})})}();